[{"name":"public.audit_logs","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"table_name","type":"text","null":false,"pk":false},{"name":"record_id","type":"uuid","null":false,"pk":false},{"name":"action","type":"public.audit_action","null":false,"pk":false,"enum":["INSERT","UPDATE","SOFT_DELETE","HARD_DELETE","LOGIN_ATTEMPT","SECURITY_BLOCK","DEEP_LINK_ACCESS","DEEP_LINK_FAILURE","ACCESS_CHECK","ACCESS_DENIED"]},{"name":"old_values","type":"jsonb","null":true,"pk":false},{"name":"new_values","type":"jsonb","null":true,"pk":false},{"name":"performed_by","type":"text","null":true,"pk":false},{"name":"ip_address","type":"inet","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"event_type","type":"text","null":true,"pk":false},{"name":"event_data","type":"jsonb","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{"action":["INSERT","UPDATE","SOFT_DELETE","HARD_DELETE","LOGIN_ATTEMPT","SECURITY_BLOCK","DEEP_LINK_ACCESS","DEEP_LINK_FAILURE","ACCESS_CHECK","ACCESS_DENIED"]}},{"name":"public.bookings","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"user_id","type":"uuid","null":false,"pk":false,"fk":"users.id"},{"name":"provider_id","type":"uuid","null":false,"pk":false,"fk":"providers.id"},{"name":"service_id","type":"uuid","null":true,"pk":false,"fk":"services.id"},{"name":"start_time","type":"timestamptz","null":false,"pk":false},{"name":"end_time","type":"timestamptz","null":false,"pk":false},{"name":"status","type":"public.booking_status","null":true,"pk":false,"enum":["pending","confirmed","cancelled","completed","no_show","rescheduled"]},{"name":"gcal_event_id","type":"text","null":true,"pk":false},{"name":"notes","type":"text","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"updated_at","type":"timestamptz","null":true,"pk":false},{"name":"deleted_at","type":"timestamptz","null":true,"pk":false},{"name":"reminder_1_sent_at","type":"timestamptz","null":true,"pk":false},{"name":"reminder_2_sent_at","type":"timestamptz","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{"status":["pending","confirmed","cancelled","completed","no_show","rescheduled"]}},{"name":"public.providers","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"user_id","type":"uuid","null":true,"pk":false},{"name":"name","type":"text","null":false,"pk":false},{"name":"email","type":"public.citext","null":true,"pk":false},{"name":"google_calendar_id","type":"text","null":true,"pk":false},{"name":"slot_duration_minutes","type":"integer","null":true,"pk":false},{"name":"min_notice_hours","type":"integer","null":true,"pk":false},{"name":"public_booking_enabled","type":"boolean","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"deleted_at","type":"timestamptz","null":true,"pk":false},{"name":"slug","type":"text","null":true,"pk":false},{"name":"slot_duration_mins","type":"integer","null":false,"pk":false}],"pk":["id"],"idx":[],"enums":{}},{"name":"public.users","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"telegram_id","type":"bigint","null":false,"pk":false},{"name":"first_name","type":"text","null":true,"pk":false},{"name":"last_name","type":"text","null":true,"pk":false},{"name":"username","type":"text","null":true,"pk":false},{"name":"phone_number","type":"text","null":true,"pk":false},{"name":"rut","type":"text","null":true,"pk":false},{"name":"role","type":"public.user_role","null":true,"pk":false,"enum":["user","admin","system"]},{"name":"language_code","type":"public.supported_lang","null":true,"pk":false,"enum":["es","en","pt"]},{"name":"metadata","type":"jsonb","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"updated_at","type":"timestamptz","null":true,"pk":false},{"name":"deleted_at","type":"timestamptz","null":true,"pk":false},{"name":"password_hash","type":"text","null":true,"pk":false},{"name":"last_selected_provider_id","type":"uuid","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{"role":["user","admin","system"],"language_code":["es","en","pt"]}},{"name":"public.services","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"provider_id","type":"uuid","null":false,"pk":false,"fk":"providers.id"},{"name":"name","type":"text","null":false,"pk":false},{"name":"description","type":"text","null":true,"pk":false},{"name":"duration_minutes","type":"integer","null":false,"pk":false},{"name":"price","type":"numeric(10,2)","null":true,"pk":false},{"name":"tier","type":"public.service_tier","null":true,"pk":false,"enum":["standard","premium","emergency"]},{"name":"active","type":"boolean","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{"tier":["standard","premium","emergency"]}},{"name":"public.schedules","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"provider_id","type":"uuid","null":false,"pk":false,"fk":"providers.id"},{"name":"day_of_week","type":"public.day_of_week","null":false,"pk":false,"enum":["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},{"name":"start_time","type":"time","null":false,"pk":false},{"name":"end_time","type":"time","null":false,"pk":false},{"name":"is_active","type":"boolean","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{"day_of_week":["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}},{"name":"public.notification_queue","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"booking_id","type":"uuid","null":true,"pk":false,"fk":"bookings.id"},{"name":"user_id","type":"uuid","null":true,"pk":false,"fk":"users.id"},{"name":"message","type":"text","null":false,"pk":false},{"name":"priority","type":"integer","null":true,"pk":false},{"name":"status","type":"public.notification_status","null":true,"pk":false,"enum":["pending","sent","failed"]},{"name":"retry_count","type":"integer","null":true,"pk":false},{"name":"error_message","type":"text","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"updated_at","type":"timestamptz","null":true,"pk":false},{"name":"sent_at","type":"timestamptz","null":true,"pk":false},{"name":"next_retry_at","type":"timestamptz","null":true,"pk":false},{"name":"channel","type":"varchar(50)","null":true,"pk":false},{"name":"recipient","type":"text","null":true,"pk":false},{"name":"payload","type":"jsonb","null":true,"pk":false},{"name":"max_retries","type":"integer","null":true,"pk":false},{"name":"expires_at","type":"timestamptz","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{"status":["pending","sent","failed"]}},{"name":"public.provider_cache","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"provider_id","type":"uuid","null":false,"pk":false,"fk":"providers.id"},{"name":"provider_slug","type":"text","null":false,"pk":false},{"name":"data","type":"jsonb","null":false,"pk":false},{"name":"cached_at","type":"timestamptz","null":false,"pk":false},{"name":"expires_at","type":"timestamptz","null":false,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{}},{"name":"public.security_firewall","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"entity_id","type":"text","null":false,"pk":false},{"name":"strike_count","type":"integer","null":true,"pk":false},{"name":"is_blocked","type":"boolean","null":true,"pk":false},{"name":"blocked_until","type":"timestamptz","null":true,"pk":false},{"name":"last_strike_at","type":"timestamptz","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"updated_at","type":"timestamptz","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{}},{"name":"public.circuit_breaker_state","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"workflow_name","type":"varchar(200)","null":false,"pk":false},{"name":"state","type":"varchar(20)","null":true,"pk":false},{"name":"failure_count","type":"integer","null":true,"pk":false},{"name":"last_failure_at","type":"timestamptz","null":true,"pk":false},{"name":"opened_at","type":"timestamptz","null":true,"pk":false},{"name":"next_attempt_at","type":"timestamptz","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"updated_at","type":"timestamptz","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{}},{"name":"public.system_errors","cols":[{"name":"error_id","type":"uuid","null":false,"pk":true},{"name":"workflow_name","type":"text","null":true,"pk":false},{"name":"workflow_execution_id","type":"text","null":true,"pk":false},{"name":"error_type","type":"text","null":true,"pk":false},{"name":"severity","type":"text","null":true,"pk":false},{"name":"error_message","type":"text","null":true,"pk":false},{"name":"error_stack","type":"text","null":true,"pk":false},{"name":"error_context","type":"jsonb","null":true,"pk":false},{"name":"user_id","type":"uuid","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"resolved_at","type":"timestamptz","null":true,"pk":false},{"name":"is_resolved","type":"boolean","null":true,"pk":false},{"name":"resolution_notes","type":"text","null":true,"pk":false}],"pk":["error_id"],"idx":[],"enums":{}},{"name":"public.app_config","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"key","type":"varchar(100)","null":false,"pk":false},{"name":"value","type":"text","null":false,"pk":false},{"name":"type","type":"varchar(20)","null":true,"pk":false},{"name":"category","type":"varchar(50)","null":true,"pk":false},{"name":"description","type":"text","null":true,"pk":false},{"name":"is_public","type":"boolean","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"updated_at","type":"timestamptz","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{}},{"name":"public.admin_users","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"username","type":"varchar(50)","null":false,"pk":false},{"name":"password_hash","type":"text","null":false,"pk":false},{"name":"role","type":"varchar(20)","null":true,"pk":false},{"name":"is_active","type":"boolean","null":true,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"updated_at","type":"timestamptz","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{}},{"name":"public.admin_sessions","cols":[{"name":"id","type":"uuid","null":false,"pk":true},{"name":"user_id","type":"uuid","null":false,"pk":false,"fk":"admin_users.id"},{"name":"token_hash","type":"text","null":false,"pk":false},{"name":"expires_at","type":"timestamptz","null":false,"pk":false},{"name":"created_at","type":"timestamptz","null":true,"pk":false},{"name":"last_used_at","type":"timestamptz","null":true,"pk":false},{"name":"is_revoked","type":"boolean","null":true,"pk":false}],"pk":["id"],"idx":[],"enums":{}}]
